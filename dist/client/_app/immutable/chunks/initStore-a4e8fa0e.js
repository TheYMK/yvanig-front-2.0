import{B as l}from"./index-238b7a49.js";import{a as c}from"./settingsStore-fa6930ba.js";const i={bookingCache:{document_type:null,document_number:null,phone_number:null,date_of_birth:null,gender:null,booking_type:"flight",selectedOffer:null,flightId:null,seatId:null,payment_method:null},currentStep:0},f=l(i),{subscribe:b,update:a}=f,h={subscribe:b,init(t){try{let e={},n=1;return window&&window.localStorage.getItem("bookingCache")?(e=JSON.parse(window.localStorage.getItem("bookingCache")),console.log("[bookingStore] cache",e),e.flightId==t?(e.selectedOffer&&(n=2),e.selectedOffer&&e.document_type&&e.document_number&&e.phone_number&&e.date_of_birth&&e.gender&&(n=3),e.selectedOffer&&e.document_type&&e.document_number&&e.phone_number&&e.date_of_birth&&e.gender&&e.seatId&&(n=4),e.selectedOffer&&e.document_type&&e.document_number&&e.phone_number&&e.date_of_birth&&e.gender&&e.seatId&&e.payment_method&&(n=5)):window.localStorage.setItem("bookingCache",JSON.stringify(i.bookingCache))):window&&window.localStorage.setItem("bookingCache",JSON.stringify(i.bookingCache)),a(o=>({...o,bookingCache:{...o.bookingCache,...e},currentStep:n}))}catch(e){console.error("[bookingCacheStore] error on init",e)}},updateBooking(t){if(window&&window.localStorage.getItem("bookingCache")){let e=1;return window.localStorage.setItem("bookingCache",JSON.stringify(t)),t.selectedOffer&&t.flightId&&(e=2),t.selectedOffer&&t.flightId&&t.document_type&&t.document_number&&t.phone_number&&t.date_of_birth&&t.gender&&(e=3),t.selectedOffer&&t.flightId&&t.document_type&&t.document_number&&t.phone_number&&t.date_of_birth&&t.gender&&t.seatId&&(e=4),t.selectedOffer&&t.flightId&&t.document_type&&t.document_number&&t.phone_number&&t.date_of_birth&&t.gender&&t.seatId&&t.payment_method&&(e=5),a(n=>({...n,bookingCache:{...t},currentStep:e}))}},resetBooking(){return window.localStorage.setItem("bookingCache",JSON.stringify(i.bookingCache)),a(t=>({bookingCache:i.bookingCache,currentStep:i.currentStep}))}},d={bookingStore:h,settingsStore:c};async function p(){const{settingsStore:t}=d;try{await Promise.all([t.init()])}catch(e){console.error("[initBaseStores] error on init",e)}}async function S(t){const{bookingStore:e}=d;try{await e.init(t)}catch(n){console.error("[initBookingStore] error on init",n)}}export{S as a,h as b,p as i};
